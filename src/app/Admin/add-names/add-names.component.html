<div class="add-names" nzJustify="center">
  <div class="name-header">
    <h2 nz-typography>NEPALI NAMES</h2>
    <div class="add-button">
      <button
        nz-button
        nzType="primary"
        nzSize="large"
        nzShape="round"
        nzMask="true"
        [nzType]="'primary'"
        (click)="showModalAdd()"
      >
        <i nz-icon nzType="plus-circle"></i>
        Add Name
      </button>
      <nz-modal
        [(nzVisible)]="isVisibleTop"
        nzTitle="ADD Names"
        nzMask="true"
        nzWidth="700px"
        (nzOnCancel)="handleCancelAdd()"
        (nzOnOk)="handleOkAdd()"
      >
        <ng-container *nzModalContent>
          <form nz-form [formGroup]="form" (ngSubmit)="handleOkAdd()">
            <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="name"
                >Name</nz-form-label
              >
              <nz-form-control
                [nzSm]="14"
                [nzXs]="24"
                nzErrorTip="The input is not valid "
              >
                <input
                  nz-input
                  id="name"
                  nzSize="large"
                  formControlName="name"
                />
              </nz-form-control>
            </nz-form-item>
            <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="nepali"
                >Name in Nepali</nz-form-label
              >
              <nz-form-control
                [nzSm]="14"
                [nzXs]="24"
                nzErrorTip="The input is not valid"
              >
                <input
                  nz-input
                  id="nepali"
                  nzSize="large"
                  formControlName="nepali"
                />
              </nz-form-control>
            </nz-form-item>
            <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="gender"
                >Gender</nz-form-label
              >
              <nz-form-control>
                <nz-radio-group formControlName="gender">
                  <label nz-radio nzValue="male">Male</label>
                  <label nz-radio nzValue="female">Female</label>
                </nz-radio-group>
              </nz-form-control>
            </nz-form-item>
            <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="desc"
                >Description</nz-form-label
              >
              <nz-form-control>
                <textarea
                  rows="4"
                  id="desc"
                  formControlName="description"
                  nz-input
                ></textarea>
              </nz-form-control>
            </nz-form-item>
          </form>
        </ng-container>
        <div *nzModalFooter>
          <button nz-button nzType="default" (click)="handleCancelAdd()">
            Cancle
          </button>
          <button
            nz-button
            nzType="primary"
            (click)="handleOkAdd()"
            [nzLoading]="isConfirmLoading"
            [disabled]="form.invalid"
          >
            Submit
          </button>
        </div>
      </nz-modal>
    </div>
  </div>
  <div class="name-search" nzJustify="center">
    <nz-input-group nzSize="large" [nzSuffix]="suffixIcon">
      <input
        placeholder="Search Names"
        nzSize="large"
        nz-input
        [(ngModel)]="inputValue"
        (ngModelChange)="onChange($event)"
        [nzAutocomplete]="auto"
      />
    </nz-input-group>
    <ng-template #suffixIcon>
      <i nz-icon nzType="search"></i>
    </ng-template>
    <nz-autocomplete #auto>
      <nz-auto-option
        class="global-search-item"
        *ngFor="let option of filteredOptions"
        [nzValue]="option.name"
      >
        {{ option.name }}
      </nz-auto-option>
    </nz-autocomplete>
  </div>
  <nz-divider></nz-divider>
  <div class="name-table">
    <nz-table
      #editRowTable
      nzBordered
      [nzData]="filteredOptions"
      nzTableLayout="fixed"
    >
      <thead>
        <tr>
          <th
            *ngFor="let column of listOfColumn"
            [nzSortFn]="column.compare"
            [nzSortPriority]="column.priority"
          >
            {{ column.title }}
          </th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let data of editRowTable.data">
          <ng-container *ngIf="!editCache[data.id].edit; else editTemplate">
            <td>{{ data.name }}</td>
            <td>{{ data.nepali }}</td>
            <td>{{ data.gender }}</td>
            <td>{{ data.description }}</td>
            <td>{{ data.update | date }}</td>
            <td><a (click)="startEdit(data.id)">Edit</a></td>
          </ng-container>
          <ng-template #editTemplate>
            <td>
              <input
                type="text"
                nz-input
                nzSize="large"
                [(ngModel)]="editCache[data.id].data.name"
              />
            </td>
            <td>
              <input
                type="text"
                nzSize="large"
                nz-input
                [(ngModel)]="editCache[data.id].data.nepali"
              />
            </td>
            <td>
              <input
                type="text"
                nz-input
                nzSize="large"
                [(ngModel)]="editCache[data.id].data.gender"
              />
            </td>
            <td>
              <input
                type="text"
                nz-input
                nzSize="large"
                [(ngModel)]="editCache[data.id].data.description"
              />
            </td>
            <td>
              <input
                type="text"
                nz-input
                nzSize="large"
                [(ngModel)]="editCache[data.id].data.update"
              />
            </td>
            <td>
              <a (click)="saveEdit(data.id)" class="save">Save</a>&nbsp;
              <a
                nz-popconfirm
                nzPopconfirmTitle="Sure to cancel ?"
                (nzOnConfirm)="cancelEdit(data.id)"
                >Cancel</a
              >&nbsp;
              <a
                nz-popconfirm
                nzPopconfirmTitle="Sure to Delete?"
                (nzOnConfirm)="deleteEdit(data.id)"
                >Delete</a
              >
            </td>
          </ng-template>
        </tr>
      </tbody>
    </nz-table>

    <!--
      nzType="primary"
        nzSize="large"
        nzMask="true"
        [nzType]="'primary'"
        (click)="showModalAdd()"
       [(nzVisible)]="isVisibleTop"
        nzTitle="ADD Names"
        nzMask="true"
        nzWidth="700px"
        (nzOnCancel)="handleCancelAdd()"
        (nzOnOk)="handleOkAdd()"
    <form nz-form>
      <nz-form-item>
        <nz-form-label [nzSpan]="6" nzFor="email">E-mail</nz-form-label>
        <nz-form-control [nzSpan]="14">
          <input nz-input name="email" type="email" id="email" />
        </nz-form-control>
      </nz-form-item>
    </form>
    -->
  </div>
</div>
